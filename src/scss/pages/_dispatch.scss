
// dispatcher form card
// TODO:css class namespace: prefix with .si-dispatch
$si-dfc-mute-color: $si-label-1;
$si-dfc-active-color: $primary;

$si-dfc-stamp-width: 3rem;
$si-dfc-event-width: 16.5rem;
$si-dfc-line-width: 0.2rem;
$si-dfc-dot-width: 1.4rem;
$si-dfc-space-width: 1rem;

$si-dfc-entry-width: $si-dfc-stamp-width + $si-dfc-space-width * 2 + $si-dfc-dot-width + $si-dfc-event-width;
$si-dfc-entry-height: 5rem;
// ------------
// SI Dispatch
// ------------
$si-dispatch-overlay-bg-opacity: 0.6;
$si-dispatch-error-color1: lighten($danger-solid, 5%);
$si-dispatch-error-color2: rgba(0, 0, 0, 0.5);
$si-dispatch-error-color3: #B14600;
.si-dispatch__overlay-wrapper {
  &.show { display: block; }
  &:not(.show) { display: none; }

  // FIXME:replace 90px with $si-sidebar-width
  width: calc(100% - 90px);
  height: 100%;
  position: absolute;
  z-index: 1001;
  background-color: rgba(0, 0, 0, 0.9);
  background-image: linear-gradient(to bottom,
                                    rgba(0, 0, 0,$si-dispatch-overlay-bg-opacity) 0%,
                                    rgba($danger-solid ,$si-dispatch-overlay-bg-opacity / 2) 10%,
                                    rgba($danger-solid ,$si-dispatch-overlay-bg-opacity / 2) 50%,
                                    rgba($danger-solid ,$si-dispatch-overlay-bg-opacity / 2) 90%,
                                    rgba(0, 0, 0,$si-dispatch-overlay-bg-opacity) 100%);
}

.si-dispatch__error-zibra {
  position: absolute;
  width: 100%;
  height: 5vh;
  background-image: linear-gradient(45deg, $si-dispatch-error-color2 10%, $si-dispatch-error-color1 10%, $si-dispatch-error-color1 50%, $si-dispatch-error-color2 50%, $si-dispatch-error-color2 60%, $si-dispatch-error-color1 60%, $si-dispatch-error-color1 100%);
  background-size: 3.5rem 3.5rem;
  background-repeat: repeat-x;

  &:first-child {
    top: 0;
    // FIXME: animation display wrong in SAFARI, see here for tutorial: https://www.cssscript.com/animated-progress-bar-component-with-pure-css/
    // @include si-animation('si-progress-active-right 2s 30 linear');
  }
  &:nth-child(2) {
    bottom: 0;
    // FIXME: animation display wrong in SAFARI, see here for tutorial: https://www.cssscript.com/animated-progress-bar-component-with-pure-css/
    // @include si-animation('si-progress-active-right 2s 30 linear -1s');
  }
}

.si-dispatch__error-body {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
.si-dispatch__error-title {
  padding: 0 0.2em;
  margin-bottom: 3rem;
  border-top: 5px solid $si-dispatch-error-color1;
  border-bottom: 5px solid $si-dispatch-error-color1;
  font-size: 8rem;
  font-weight: 500;
  color: $si-dispatch-error-color1;
  line-height: 1;
  text-shadow: 0 0 0.05em $si-dispatch-error-color1;
  animation: si-flash 1.5s infinite;
}

.si-dispatch__error-content {
  font-size: 3rem;
  font-weight: 500;
  color: $si-dispatch-error-color3;
  text-shadow: 0 0 0.2em $si-dispatch-error-color3;
  margin-bottom: 5rem;
}

.si-dispatch__error-retry-btn {
  @include button-outline-variant($si-dispatch-error-color1);
  margin-bottom: 3rem;
  padding: .4em .8em;
  border-radius: 0.1em;
  // border: $si-dispatch-error-color1 solid 4px;
  border-width: 4px;
  line-height: 1;
  // color: $si-dispatch-error-color1;
  font-size: 2rem;
  font-weight: 500;
  text-shadow: 0 0 0.1em rgba($light, 0.1);
  box-shadow: inset 0 0 0.4em $si-dispatch-error-color1, 0 0 0.4em $si-dispatch-error-color1;
}


// SI TimeLine
.si-timeline__wrapper {
  width: $si-dfc-entry-width;
  max-width: 100%;
}

.si-timeline__entry {
  position: relative;
  width: $si-dfc-entry-width;
  max-width: 100%;
  height: $si-dfc-entry-height;

  &:not(:first-child) {
    &::before {
        content: "";
        background: $si-dfc-mute-color;
        width: $si-dfc-line-width;
        height: $si-dfc-entry-height;
        position: absolute;
        top: -50%;
        left: $si-dfc-stamp-width + $si-dfc-space-width * 1 + (($si-dfc-dot-width - $si-dfc-line-width) / 2);
        z-index: 0;
    }
    
    &.active::before {
      content: '';
      background: $si-dfc-active-color;
    }
  }

//   dot
  &:not(.active) .si-timeline__dot { background-color: $si-dfc-mute-color; }
  &.active .si-timeline__dot { 
    background-color: $si-dfc-active-color;
    background-size: 80%;
    background-position: center;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath fill='%23ffffff' d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E");
  }
}

.si-timeline__stamp, .si-timeline__dot, .si-timeline__event {
  position: absolute;
  top: 50%;
  transform: translate(0, -50%);
  z-index: 1;
}
.si-timeline__stamp {
  width: $si-dfc-stamp-width;
  left: 0;
  text-align: right;
}

.si-timeline__dot {
  width: $si-dfc-dot-width;
  height: $si-dfc-dot-width;
  border-radius: 50%;
  left: $si-dfc-stamp-width + $si-dfc-space-width * 1;
}

.si-timeline__event {
  width: $si-dfc-event-width;
  max-width: calc(100% - #{$si-dfc-stamp-width + $si-dfc-space-width * 2 + $si-dfc-dot-width});
  left: $si-dfc-stamp-width + $si-dfc-dot-width + $si-dfc-space-width * 2;
}


.si-map__info-wrapper,.si-map__info-wrapper a {
  color: $dark;
}

.si-map__info-label {
  display: inline-block;
  margin-right: 0.5rem;
  padding: 0.2rem 0.4rem;
  border-radius: 0.2rem;
  background: #fff;
  color: $dark;
  font-size: 1rem;
  font-weight: 600;
  &, a { transition: $transition-base; }

  span {
    vertical-align: middle;
    margin-right: 0.2rem;
  }

  &:hover {
    background: darken(#fff, 10%);
    box-shadow: 0 5px 15px rgba(0,0,0,.05),0 4px 10px rgba(233,236,239,.25);
  }

  &[href]:hover, a[href]:hover {
    text-decoration: none;
  }
}

.si-map__question-wrapper {
  border: 2px solid rgba(0, 0, 0, 0.2);
}

.si-map__question-label {
  width: 30px;
  height: 30px;
  background: #fff;
  color: #000;
  line-height: 30px;
  padding: 0;
  border-radius: 2px;
  transition: $transition-base;

  &:hover {
    color: #000;
    background: darken(#fff, 10%);
    box-shadow: 0 5px 15px rgba(0,0,0,.05),0 4px 10px rgba(233,236,239,.25);
  }
}